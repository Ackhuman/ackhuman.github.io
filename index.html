<head>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"/>
    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/e3cd547933.js" crossorigin="anonymous"></script>
    <!-- File Saver -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/1.3.8/FileSaver.min.js"></script>
    <!-- RxJs -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/rxjs/6.6.3/rxjs.umd.min.js"></script>
    
    <!-- App -->
    <link rel="stylesheet" href="app.css"/>
    <script type="text/javascript" src="dialog.js"></script>
    <script type="text/javascript" src="error.service.js"></script>
    <script type="text/javascript" src="device.service.js"></script>
    <script type="text/javascript" src="storage.service.js"></script>
    <script type="text/javascript" src="wav-recording.service.js"></script>
    <script type="text/javascript" src="recording.service.js"></script>
    <script type="text/javascript" src="visualizer.controller.js"></script>
    <script type="text/javascript" src="statusDisplay.controller.js"></script>
    <script type="text/javascript" src="recordingControls.controller.js"></script>
    <script type="text/javascript" src="index.js"></script>
</head>
<body class="app">

    <div class="container-fluid">
        <div class="row">
            <div class="col-sm-12 col-md-12 col-lg-6">
                <div class="card my-2">
                    <div class="card-body" id="introTextContainer">
                        <!-- Intro text will be inserted here -->
                    </div>
                </div>

                <div class="card my-2">
                    <div id="recordingControls" class="card-body">
                        <div id="displayContainer" class="row recording-status mx-2">
                            <!-- Display will be inserted here -->
                        </div>
                        <div id="containerControls" class="my-1">
                            <!--Controls will be inserted here-->
                        </div>
                        <div class="row" style="display:none;">                            
                            <div class="col-sm-3 align-middle text-right px-0 py-2">
                                Recording Method:
                            </div>
                            <div id="recordingMethod" class="col-sm-5">
                                <select id="selRecordingMethod" class="custom-select">
                                    <option value="lossless" selected>WAV recording (experimental)</option>
                                    <option value="lossy">WEBM/OGG recording</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="text/template" id="tplIntroText">
        <h2>Neighbor Science sound recorder</h2>
        <div class="row">
            <div class="col-sm-12">
                <h5>Instructions:</h5>
                <p>
                    Use the controls to start the recording. You can pause and resume if needed.
                    When you are done recording, press the stop button and then the download button.
                </p>
            </div>
        </div>
    </script>
    <script type="text/template" id="tplDisplay">
        <span id="recordingStatus" class=" col-sm-3 align-middle py-2">
            <div id="lblTimeDisplay">
                00:00:00
            </div>
            <div id="displayDivider">
                &mdash;
            </div>
            <div id="lblStatusDisplay">
                Not Started
            </div>
        </span>
        <span id="colVisualizer" class="col-sm-9 py-2">
            <canvas id="visualizer" height="150" width="400"></canvas>
        </span>
    </script>
    <script type="text/template" id="tplControls">
        <button id="btnStart"
            type="button" 
            class="btn btn-link"
            onclick="NeighborScience.Controller.RecordingControls.OnStartClicked()"
            title="Start">
            <i class="fa fa-circle"></i>
        </button>
        <button id="btnPause"
            type="button" 
            class="btn btn-link"
            disabled="disabled"
            onclick="NeighborScience.Controller.RecordingControls.OnPauseClicked()"
            title="Pause Recording">
            <i class="fa fa-pause"></i>
        </button>
        <button id="btnStop"
            type="button" 
            class="btn btn-link"
            disabled="disabled"
            onclick="NeighborScience.Controller.RecordingControls.OnStopClicked()"
            title="Stop Recording">
            <i class="fa fa-stop"></i>
        </button>
        <button id="btnDownload"
            type="button" 
            class="btn btn-link"
            disabled="disabled"
            onclick="NeighborScience.Controller.RecordingControls.OnDownloadClicked()"
            title="Download Audio">
            <i class="fa fa-download"></i>
        </button>
        <button id="btnDump"
            type="button" 
            class="btn btn-link"
            disabled="disabled"
            onclick="NeighborScience.Controller.RecordingControls.OnDumpClicked()"
            title="Dump Audio and Restart">
            <i class="fa fa-trash text-danger"></i>
        </button>
    </script>

    <script type="text/template" id="tplFileNameModal">
        <div class="form">
            <div class="form-group">
                <span class="form-label">File Name:</span>
                <span class="form-control">
                    <input type="text" 
                        id="txtFileName" 
                        placeholder="Enter the name of the file that will be saved." />
                </span>
            </div>
        </div>
    </script>

    <script id="initScript" type="text/javascript">
        NeighborScience.Dialog.Init();
        NeighborScience.Controller.Main.Init();
        NeighborScience.Controller.RecordingControls.Init();
        NeighborScience.Controller.StatusDisplay.Init();
    </script>
</body>